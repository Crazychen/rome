<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2013-09-27 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>ROME - Understanding the Rome common classes and interfaces</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="mkurz" />
    <meta name="Date-Creation-yyyymmdd" content="20110814" />
    <meta name="Date-Revision-yyyymmdd" content="20130927" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://github.com/rometools/" id="bannerLeft">
                                                <img src="../images/romelogo.png" alt="ROME" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                  <div class="xright">        
                    
                 <span id="publishDate">Last Published: 2013-09-27</span>
              &nbsp;| <span id="projectVersion">Version: 1.1-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Rome</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="Overview">Overview</a>
            </li>
                                                                                                                                                                        <li class="expanded">
                          <a href="../HowRomeWorks/index.html" title="How Rome Works">How Rome Works</a>
                    <ul>
                      <li class="none">
                          <a href="../HowRomeWorks/RomeV0.4TutorialUsingRomeToReadASyndicationFeed.html" title="Read a syndication feed">Read a syndication feed</a>
            </li>
                      <li class="none">
                          <a href="../HowRomeWorks/RomeV0.4TutorialUsingRomeToCreateAndWriteASyndicationFeed.html" title="Create and write a syndication feed">Create and write a syndication feed</a>
            </li>
                      <li class="none">
                          <a href="../HowRomeWorks/RomeV0.4TutorialUsingRomeToConvertASyndicationFeedFromOneTypeToAnother.html" title="Convert a syndication feed">Convert a syndication feed</a>
            </li>
                      <li class="none">
                          <a href="../HowRomeWorks/RomeV0.4TutorialUsingRomeToAggregateManySyndicationFeedsIntoASingleOne.html" title="Aggregate many syndication feeds">Aggregate many syndication feeds</a>
            </li>
                      <li class="none">
            <strong>Common classes and interfaces</strong>
          </li>
                      <li class="none">
                          <a href="../HowRomeWorks/RomeV0.4TutorialDefiningACustomModuleBeanParserAndGenerator.html" title="Defining a Custom Module">Defining a Custom Module</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="../RssAndAtOMUtilitiEsROMEV0.5AndAboveTutorialsAndArticles/index.html" title="Tutorials And Articles">Tutorials And Articles</a>
            </li>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="../ROMEReleases/index.html" title="Releases">Releases</a>
                  </li>
                  <li class="none">
                          <a href="../ROMEDevelopmentProposals/index.html" title="ROME Development Proposals">ROME Development Proposals</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="../project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section">
<h2>Understanding the Rome common classes and interfaces<a name="Understanding_the_Rome_common_classes_and_interfaces"></a></h2>
<p>The Rome common package contains a set of Java classes that provide support for all the basic features Java Beans commonly must have: toString, equals, hashcode and cloning. There is also a simple enumeration base class (missing Java 5.0 already).</p>
<p>By implementing or extending the common classes and interfaces Beans don't have to hand code these functions. This greatly simplifies things when Beans have several properties, collection properties and composite properties.</p>
<p>The common classes use Java Bean instrospection on the properties of the classes extending and using them. This is done recursively on all properties.</p>
<p>All Rome Beans (interfaces and default implementations) leverage and use these classes and interfaces defined in the common package.</p>
<p>Ideally all this classes and interface should be part of a general component outside of Rome as they are not syndication specific (something like a commons-bean component if we use Jakarta Commons naming). They cannot be hidden in an implementation package as Rome public API uses them.</p>
<div class="section">
<h3>ToString and ToStringBean<a name="ToString_and_ToStringBean"></a></h3>
<p>Beans implementing the ToString interface must implement the toString(String prefix) method. This method must print the bean properties names and values, one per per line, separating the name and value with an '=' sign and prefixing the name with the given prefix parameter using the same notation used in the JSP expression language used in JSTL and in JSP 2.0. This must be done recursively for all array, collection and ToString properties.</p>
<p>The ToStringBean class provides an implementation of the ToString interface with the defined behavior. The ToStringBean constructor takes the class definition the ToStringBean class should use for properties scanning -using instrospection- for printing, normally it is the class of the Bean using the ToStringBean. Beans leveraging the ToStringBean implementation can do it using two different patterns.</p></div>
<div class="section">
<h3>Extending ToStringBean<a name="Extending_ToStringBean"></a></h3>
<div class="source">
<pre>
public class MyBean extend ToStringBean {

        public MyBean() {
            super(MyBean.class);
        }

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }
    }
</pre></div>
<div class="section">
<h4>Using a ToStringBean in delegation mode<a name="Using_a_ToStringBean_in_delegation_mode"></a></h4>
<div class="source">
<pre>
public class MyBean implements ToString {

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }

        public String toString(String prefix) {
        ToStringBean tsBean = new ToStringBean(MyBean.class,this);
        return tsBean.toString(prefix);
        }

        public String toString() {
            return toString(&quot;myBean&quot;);
        }
    }
</pre></div></div></div>
<div class="section">
<h3>EqualBean<a name="EqualBean"></a></h3>
<p>The EqualsBean class provides a recursive introspetion-based implementation of the equals() and hashCode() methods working on the Bean properties. The EqualsBean constructor takes the class definition that should be properties scanned (using introspection) by the equals() and thehashCode() methods. The EqualsBean class works on array, collection, bean and basic type properties. Java Beans leveraging the EqualsBean implementation can do it using two different patterns.</p>
<div class="section">
<h4>Extending EqualsBean<a name="Extending_EqualsBean"></a></h4>
<div class="source">
<pre>
public class MyBean extend EqualsBean {

        public MyBean() {
            super(MyBean.class);
        }

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }
    }
</pre></div></div>
<div class="section">
<h4>Using a EqualsBean in delegation mode<a name="Using_a_EqualsBean_in_delegation_mode"></a></h4>
<div class="source">
<pre>
public class MyBean implements ToString {

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }

        public boolean equals(Object obj) {
            EqualsBean eBean = new EqualsBean(MyBean.class,this);
            return eBean.beanEquals(obj);
        }

        public int hashCode() {
            EqualsBean equals = new EqualsBean(MyBean.class,this);
            return equals.beanHashCode();
        }
    }
</pre></div></div></div>
<div class="section">
<h3>CloneableBean<a name="CloneableBean"></a></h3>
<p>The CloneableBean class provides a recursive introspetion-based implementation of the clone() method working on the Bean properties. The CloneableBean class works on array, collection, bean and basic type properties. Java Beans leveraging the CloneableBean implementation can do it using two different patterns.</p>
<div class="section">
<h4>Extending CloneableBean<a name="Extending_CloneableBean"></a></h4>
<div class="source">
<pre>
public class MyBean extend CloneableBean {

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }
    }
</pre></div></div>
<div class="section">
<h4>Using a CloneableBean in delegation mode<a name="Using_a_CloneableBean_in_delegation_mode"></a></h4>
<div class="source">
<pre>
public class MyBean implements Cloneable {

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }

        public Object clone() {
            CloneableBean cBean = new CloneableBean(this);
            return cBean.beanClone();
        }
    }
</pre></div>
<p>By default, the CloneableBean copies all properties of the given object. It also supports an ignore-properties set, the property names in this set will not be copied to the cloned instance. This is useful for cases where the Bean has convenience properties (properties that are actually references to other properties or properties of properties). For example SyndFeed and SyndEntry beans have convenience properties, publishedDate, author, copyright and categories all of them mapped to properties in the DC Module.</p></div></div>
<div class="section">
<h3>ObjectBean<a name="ObjectBean"></a></h3>
<p>The ObjectBean is a convenience bean providing ToStringBean, EqualsBean and CloneableBean functionality support. Also, ObjectBeans implements the Serializable interface making the beans serializable if all its properties are. Beans extending ObjectBean get toString(), equals(), hashCode() and clone() support as defined above.</p>
<p>And example of using the ObjectBean class is:</p>
<div class="source">
<pre>
public class MyBean extends ObjectBean {

        public MyBean() {
            super(MyBean.class);
        }

        public Foo getFoo() { ... }
        public void setFoo(Foo foo) { ... }

        public String getName() { ... }
        public void setName(String name) { ... }

        public List getValues() { ... }
        public void setValues(List values) { ... }
    }
</pre></div></div>
<div class="section">
<h3>Enum<a name="Enum"></a></h3>
<p>The Enum is an enumeration base class [Too bad Java 5.0 is not here yet (Aug/16/2004)] with equals(), hashCode(), toString(), clone() and serialization support. When used as properties of Beans implementing any of the above function it provides a seamless integration.</p>
<p>And example of using the EnumBean class is:</p>
<div class="source">
<pre>
public static class Day extends Enum {
        private Day(String name) {
            super(name);
        }

        public static final Day SUNDAY = new Day(&quot;sunday&quot;);
        public static final Day MONDAY = new Day(&quot;monday&quot;);
        public static final Day TUESDAY = new Day(&quot;tuesday&quot;);
        public static final Day WEDNESDAY = new Day(&quot;wednesday&quot;);
        public static final Day THURSDAY = new Day(&quot;thursday&quot;);
        public static final Day FRIDAY = new Day(&quot;friday&quot;);
        public static final Day SATURDAY = new Day(&quot;saturday&quot;);

    }
</pre></div></div>
<div class="section">
<h3>CopyFrom<a name="CopyFrom"></a></h3>
<p>The CopyFrom interface defines functionality similar to a deep cloning. The difference with the clone() method (besides the deep cloning requirements) is that the object to be the copy of the original one has to be explicitly created and it is this object the one that triggers the deep copying process. Implemetations of the CopyFrom interface should work propertly on arrays, collections, CopyFrom and basic type properties.</p>
<p>Using CopyFrom objects enables copying data between different implementations of a given interface without these implementation having to know about each other.</p>
<p>CopyFrom is unidirectional. A class implementing the CopyFrom knows how to extract properties from the given class (commonly having an interface in common).</p>
<p>A simple example using the CopyFrom interface is:</p>
<div class="source">
<pre>
public interface Foo extends CopyFrom {
        public void setName(String name);
        public String getName();

        public void setValues(Set values);
        public Set getValues();
    }

    public class FooImplA implements Foo {
        private String _name;
        private Set _values;

        public void setName(String name) {
            _name = name;
        }

        public String getName() {
            return _name;
        }

        public void setValues(Set values) {
            _values = values;
        }

        public Set getValues() {
            return _values;
        }

        public void copyFrom(Object obj) {
            Foo other = (Foo) obj;
            setName(other.getName());
            setValues(new HashSet(other.getValues());
        }

        public Class getInterface() {
            return Foo.class;
        }
    }

    public class FooImplB implements Foo {
        private Map _data;

        public FooImplB() {
            _data = new HashMap();
        }

        public void setName(String name) {
            _data.put(&quot;name&quot;,name);
        }

        public String getName() {
            return (String) _data.get(&quot;name&quot;);
        }

        public void setValues(Set values) {
            _data.put(&quot;values&quot;,values);
        }

        public Set getValues() {
            return (Set) _data.get(&quot;values&quot;);
        }

        public void copyFrom(Object obj) {
            Foo other = (Foo) obj;
            setName(other.getName());
            setValues(new HashSet(other.getValues());
        }

        public Class getInterface() {
            return Foo.class;
        }
    }
</pre></div>
<p>A use case for the CopyFrom functionality is a Java Bean implementation of an interface and a persistency implementation (such as Hibernate) of the the same interface that may add extra persistency related properties to the bean (ie, the 'Id' property as the persistency layer primary key).</p>
<p>For bean, array and collection properties the bean being invoked which copyFrom() method is invoked is responsible for those properties.</p>
<p>For properties implementing the CopyFrom interface, the bean must create a property instance implementing the interface returned by the getInterface() method. This allows the bean doing the copyFrom() to handle specialized subclasses of property elements propertly. This is also applicacle to array and collection properties. The 'modules' property of the SyndFeed and SyndEntry beans is a use case of this feature where the copyFrom() invocation must create different beans subclasses for each type of module, the getInteface() helps to find the right implementation.</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2004-2013
                        <a href="http://www.rometools.org">ROME Project</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>